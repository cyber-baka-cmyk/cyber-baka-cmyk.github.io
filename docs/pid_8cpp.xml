<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="pid_8cpp" kind="file" language="C++">
    <compoundname>pid.cpp</compoundname>
    <includes refid="pid_8h" local="yes">pid.h</includes>
    <includes local="no">algorithm</includes>
    <includes local="no">cmath</includes>
    <incdepgraph>
      <node id="1">
        <label>/home/dorz-ian/OTIS-2025/trunk/ii02726/task_03/src/pid.cpp</label>
        <link refid="pid_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>pid.h</label>
        <link refid="pid_8h_source"/>
        <childnode refid="3" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>algorithm</label>
      </node>
      <node id="5">
        <label>cmath</label>
      </node>
      <node id="3">
        <label>cstddef</label>
      </node>
    </incdepgraph>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;pid.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;algorithm&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;cmath&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>PID::compute_q()<sp/>{</highlight></codeline>
<codeline lineno="9"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>K<sp/><sp/>=<sp/>cfg_.<ref refid="structPIDConfig_1a959780b6099f38a1dcdc0a4eca063964" kindref="member">K</ref>;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>T<sp/><sp/>=<sp/>cfg_.<ref refid="structPIDConfig_1a35c2a7466fde1fc1476467de20d8390a" kindref="member">T</ref>;</highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>TD<sp/>=<sp/>cfg_.<ref refid="structPIDConfig_1a2d8fc8e6e3836e3357e4fc9eb4443cf3" kindref="member">TD</ref>;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>T0<sp/>=<sp/>cfg_.<ref refid="structPIDConfig_1a4c2c7f6eaa06a43ee3d113d6f3912e54" kindref="member">T0</ref>;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>integral_off<sp/>=<sp/>!std::isfinite(T)<sp/>||<sp/>(T<sp/>&lt;=<sp/>0.0);</highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>T_term<sp/>=<sp/>integral_off<sp/>?<sp/>0.0<sp/>:<sp/>(T0<sp/>/<sp/>T);</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/>q0_<sp/>=<sp/>K<sp/>*<sp/>(1.0<sp/>+<sp/>TD<sp/>/<sp/>T0);</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/>q1_<sp/>=<sp/>-K<sp/>*<sp/>(1.0<sp/>+<sp/>2.0<sp/>*<sp/>TD<sp/>/<sp/>T0<sp/>-<sp/>T_term);</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/>q2_<sp/>=<sp/>K<sp/>*<sp/>(TD<sp/>/<sp/>T0);</highlight></codeline>
<codeline lineno="20"><highlight class="normal">}</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"><ref refid="classPID_1aa4615a06d9f0ff5c900e02f57f8e47b3" kindref="member">PID::PID</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structPIDConfig" kindref="compound">PIDConfig</ref>&amp;<sp/>cfg)<sp/>:<sp/>cfg_(cfg)<sp/>{</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/>compute_q();</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/>reset();</highlight></codeline>
<codeline lineno="25"><highlight class="normal">}</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classPID_1ab94af9ef4c481827996681968392b7cc" kindref="member">PID::reset</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>u0,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>e_1,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>e_2)<sp/>{</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/>u_k_<sp/><sp/>=<sp/>u0;</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/>e_k_<sp/><sp/>=<sp/>e_1;</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/>e_k1_<sp/>=<sp/>e_1;</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/>e_k2_<sp/>=<sp/>e_2;</highlight></codeline>
<codeline lineno="32"><highlight class="normal">}</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>PID::saturate(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>v)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg_.<ref refid="structPIDConfig_1a937be803bf9a4c80b35b4203aed23c85" kindref="member">u_max</ref><sp/>&gt;<sp/>0.0)<sp/>{</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>=<sp/>std::clamp(v,<sp/>-cfg_.<ref refid="structPIDConfig_1a937be803bf9a4c80b35b4203aed23c85" kindref="member">u_max</ref>,<sp/>cfg_.<ref refid="structPIDConfig_1a937be803bf9a4c80b35b4203aed23c85" kindref="member">u_max</ref>);</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>v;</highlight></codeline>
<codeline lineno="39"><highlight class="normal">}</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classPID_1aab998a6f9d8ea3a2923d47c0a55a7532" kindref="member">PID::step</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>e_k)<sp/>{</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/>e_k2_<sp/>=<sp/>e_k1_;</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/>e_k1_<sp/>=<sp/>e_k_;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>e_k_<sp/><sp/>=<sp/>e_k;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>delta_u<sp/>=<sp/>q0_<sp/>*<sp/>e_k_<sp/>+<sp/>q1_<sp/>*<sp/>e_k1_<sp/>+<sp/>q2_<sp/>*<sp/>e_k2_;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>u_next<sp/><sp/>=<sp/>u_k_<sp/>+<sp/>delta_u;</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg_.<ref refid="structPIDConfig_1a2fb1c360d53f5b620a31eb3b2542de6d" kindref="member">anti_windup</ref><sp/>&amp;&amp;<sp/>cfg_.<ref refid="structPIDConfig_1a937be803bf9a4c80b35b4203aed23c85" kindref="member">u_max</ref><sp/>&gt;<sp/>0.0)<sp/>{</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u_next<sp/>=<sp/>saturate(u_next);</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/>u_k_<sp/>=<sp/>u_next;</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>u_k_;</highlight></codeline>
<codeline lineno="55"><highlight class="normal">}</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classPID_1abf0d00aa6df5de0e9317c75a12c89be9" kindref="member">PID::get_q</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">&amp;<sp/>q0,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal">&amp;<sp/>q1,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal">&amp;<sp/>q2)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/>q0<sp/>=<sp/>q0_;</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/>q1<sp/>=<sp/>q1_;</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>q2<sp/>=<sp/>q2_;</highlight></codeline>
<codeline lineno="61"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/home/dorz-ian/OTIS-2025/trunk/ii02726/task_03/src/pid.cpp"/>
  </compounddef>
</doxygen>
